<!--
Copyright (C) 2015-Today GRAP (http://www.grap.coop)
@author: Sylvain LE GAL (https://twitter.com/legalsylvain)
 License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
-->

<ion-view title="{{'Scan To Purchase' | translate}}">

    <ion-header-bar class="bar bar-header bar-stable">
        <button menu-toggle="right" class="button button-icon ion-navicon"></button>
        <h1 class="title"></ion-icon>{{'Purchase Orders' | translate}}</h1>
        <span class="top-right-icon icon ion-clipboard"></span>
    </ion-header-bar>

    <ion-content class="has-header" data-ng-init="init()">
        <form ng-submit="sub8mit()">

            <div class="list list-insert">
                <label class="item item-input">
                    <i class="icon ion-search placeholder-icon"></i>
                    <input type="text" id="search" placeholder="{{'Search' | translate }}" ng-model="data.purchase_order_filter">
                </label>
            </div>

            <div class="list">

                <ion-list>
                    <ion-item ng-repeat="order in data.purchase_order_list | filter: data.purchase_order_filter">
                        <a class="item" href="#" ng-click="select_purchase_order(order)">
                            <span class="badge badge-energized" ng-show="order.amount_total">
                                {{order.amount_total | currency:"â‚¬"}} {{'VAT Incl.' | translate}}
                            </span>
                            <h2>{{order.name }}</h2>
                            <p>
                                <span>{{order.partner.name}}</span>
                                <span ng-show="order.minimum_planned_date">- {{order.minimum_planned_date}}</span>
                            </p>
                        </a>
                    </ion-item>

                </ion-list>
            </div>
        </form>
        <label class="item">
            <button class="button button-full button-royal" ng-click="create_purchase_order()">
            {{'Create New Purchase Order' | translate}}</button>
        </label>
    </ion-content>
</ion-view>
